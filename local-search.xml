<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Mach-O</title>
    <link href="/2025/03/07/Mach-O/"/>
    <url>/2025/03/07/Mach-O/</url>
    
    <content type="html"><![CDATA[<h1 id="Mach-O"><a href="#Mach-O" class="headerlink" title="Mach-O"></a>Mach-O</h1><p>Mach-Oæ˜¯Mach objectç¼©å†™ï¼Œæ˜¯mac&#x2F;iosä¸Šç”¨äºå­˜å‚¨ç¨‹åºã€åº“çš„æ ‡å‡†æ ¼å¼</p><p><a href="https://developer.apple.com/library/archive/navigation/">https://developer.apple.com/library/archive/navigation/</a></p><h5 id="å¸¸è§ç±»å‹"><a href="#å¸¸è§ç±»å‹" class="headerlink" title="å¸¸è§ç±»å‹"></a>å¸¸è§ç±»å‹</h5><ul><li>MH_OBJECT<ul><li>ç›®æ ‡æ–‡ä»¶(.o) </li><li>é™æ€åº“(.a) é™æ€åº“å…¶å®å°±æ˜¯å¤šä¸ª.oåˆå¹¶åœ¨ä¸€èµ·</li></ul></li><li>MH_EXECUTE<ul><li>å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li><li>MH_DYLIB<ul><li>åŠ¨æ€åº“æ–‡ä»¶(.dylib .framework)</li></ul></li><li>MH_DYLINKER<ul><li>åŠ¨æ€é“¾æ¥ç¼–è¾‘å™¨ dyld</li></ul></li><li>MH_DSYM<ul><li>å­˜å‚¨ç€äºŒè¿›åˆ¶æ–‡ä»¶ç¬¦å·ä¿¡æ¯çš„æ–‡ä»¶</li></ul></li></ul><h5 id="Mach-O-ç»„æˆ"><a href="#Mach-O-ç»„æˆ" class="headerlink" title="Mach-O ç»„æˆ"></a>Mach-O ç»„æˆ</h5><p><a href="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/MachOTopics/0-Introduction/introduction.html">https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/MachOTopics/0-Introduction/introduction.html</a></p><p>A Mach-O file has the following regions of data (the complete format is described in OS X ABI Mach-O File Format Reference):</p><ul><li>Header: Specifies the target architecture of the file, such as PPC, PPC64, IA-32, or x86-64.<br>æ–‡ä»¶ç±»å‹ã€ç›®æ ‡æ¶æ„ç±»å‹ç­‰</li><li>Load commands: Specify the logical structure of the file and the layout of the file in virtual memory.<br>æè¿°æ–‡ä»¶åœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„é€»è¾‘ç»“æ„ã€å¸ƒå±€</li><li>Raw segment data: Contains raw data for the segments defined in the load commands.<br>åœ¨load commands.ä¸­å®šä¹‰çš„Segmentçš„åŸå§‹æ•°æ®</li></ul><h5 id="dyld"><a href="#dyld" class="headerlink" title="dyld"></a>dyld</h5><p>dyldç”¨äºåŠ è½½ä»¥ä¸‹ç±»å‹çš„Mach-Oæ–‡ä»¶</p><ul><li>MH_EXECUTE</li><li>MH_DYLINKER</li><li>MH_BUNDLE</li></ul><blockquote><p>Appçš„å¯æ‰§è¡Œæ–‡ä»¶ã€åŠ¨æ€åº“éƒ½æ˜¯ç”±dyldè´Ÿè´£åŠ è½½çš„</p></blockquote>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iOSåŠ¨æ€è°ƒè¯•-é€†å‘04</title>
    <link href="/2025/03/07/iOS%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95-%E9%80%86%E5%90%9104/"/>
    <url>/2025/03/07/iOS%E5%8A%A8%E6%80%81%E8%B0%83%E8%AF%95-%E9%80%86%E5%90%9104/</url>
    
    <content type="html"><![CDATA[<h1 id="iOSåŠ¨æ€è°ƒè¯•-é€†å‘04"><a href="#iOSåŠ¨æ€è°ƒè¯•-é€†å‘04" class="headerlink" title="iOSåŠ¨æ€è°ƒè¯•-é€†å‘04"></a>iOSåŠ¨æ€è°ƒè¯•-é€†å‘04</h1><h4 id="LLDB"><a href="#LLDB" class="headerlink" title="LLDB"></a>LLDB</h4><p>æœ€è€ç‰ˆæœ¬çš„Xcodeçš„è°ƒè¯•å™¨æ˜¯GDBåæ¥è‹¹æœå°±åœ¨è¿™åŸºç¡€ä¸Šå¼€å‘äº†LLDB<br>ç°åœ¨LLDBéƒ½æ˜¯å†…åµŒåœ¨Xcodeä¸­</p><h4 id="Xcodeçš„è°ƒè¯•åŸç†"><a href="#Xcodeçš„è°ƒè¯•åŸç†" class="headerlink" title="Xcodeçš„è°ƒè¯•åŸç†"></a>Xcodeçš„è°ƒè¯•åŸç†</h4><p>å½“æˆ‘ä»¬åœ¨æ‰‹æœºä¸Šè¿æ¥Xcodeè¿›è¡ŒçœŸæœºè°ƒè¯•çš„æ—¶å€™,Xcodeè¯†åˆ«æ‰‹æœºåä¼šå°†debug serverå®‰è£…åˆ°æˆ‘ä»¬çš„æ‰‹æœºä¸Š (&#x2F;Developer&#x2F;usr&#x2F;bin&#x2F;debugserver)</p><blockquote><p>debugserverä¸€å¼€å§‹æ˜¯æ”¾åœ¨macçš„Xcodeä¸­çš„<code>/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/DeviceSupport/9.0/DeveloperDiskImage.dmg/usr/bin/debugserver</code><br>å½“æˆ‘ä»¬è¿›å…¥æŸä¸ªæ–­ç‚¹æ—¶,æ‰‹æœºä¸Šçš„<code>debugsever</code>ä¼šç›‘å¬<code>lldb</code>ä¼ è¿‡æ¥çš„æŒ‡ä»¤<br><code>debugserver</code>æ¥æ”¶åˆ°æŒ‡å®šçš„æ—¶å€™,å†æ‰§è¡Œåˆ°æˆ‘ä»¬çš„Appä¸Š<br>æ¥ç€Appå†æŠŠåé¦ˆä¿¡æ¯ä¼ é€’ç»™<code>debugserver</code> ç„¶å<code>debugserver</code>å†æŠŠæ¶ˆæ¯åé¦ˆç»™<code>lldb</code>ï¼Œ<code>lldb</code>åœ¨æŠŠè°ƒè¯•ä¿¡æ¯æ‰“å°åœ¨Xcodeä¸Šã€‚</p></blockquote><p>Xcodeè°ƒè¯•å…·æœ‰å±€é™æ€§ï¼Œåªèƒ½è°ƒè¯•é€šè¿‡Xcodeå®‰è£…çš„App</p><h4 id="åŠ¨æ€è°ƒè¯•ä»»æ„App"><a href="#åŠ¨æ€è°ƒè¯•ä»»æ„App" class="headerlink" title="åŠ¨æ€è°ƒè¯•ä»»æ„App"></a>åŠ¨æ€è°ƒè¯•ä»»æ„App</h4><p>é€šè¿‡ä¸Šè¿°Xcodeçš„è°ƒè¯•åŸç†è¦æƒ³è°ƒè¯•App debugserverã€lldbè¿™ä¸¤ä¸ªå¿…ä¸å¯å°‘ å› ä¸ºæ²¡æœ‰æºç  æˆ‘ä»¬åªèƒ½åœ¨ç»ˆç«¯ä¸Šä»£æ›¿ä¸Šé¢çš„Xcode</p><h5 id="step1"><a href="#step1" class="headerlink" title="step1."></a>step1.</h5><p>Xcodeè‡ªåŠ¨ç»™æˆ‘ä»¬æŒ‰ç…§çš„debugserverè‚¯å®šæ˜¯ç”¨ä¸äº†äº†,å› ä¸ºæƒé™ä¸å¤Ÿã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ç»™ä»–ç­¾ä¸Šæƒé™</p><p>ä»æ‰‹æœºä¸Šæ‹–å‡ºdebugserverï¼ˆ&#x2F;Developer&#x2F;usr&#x2F;bin&#x2F;debugserverï¼‰<br>é‡ç­¾å â€“ å°†ä¸‹åˆ—ä¿å­˜æˆentitlement.entitlementsæ”¾åœ¨debugserveråŒçº§æ–‡ä»¶å¤¹ï¼ˆå…¶å®å°± æ˜¯ä¸ªxmlæ–‡ä»¶ åç¼€åä¸é‡è¦ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">plist</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span>   <span class="hljs-string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">plist</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;1.0&quot;</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>com.apple.springboard.debugapplications<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">true</span>/&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>get-task-allow<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">true</span>/&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>task_for_pid-allow<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">true</span>/&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>run-unsigned-code<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span> <br> <span class="hljs-tag">&lt;<span class="hljs-name">true</span>/&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">plist</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨<code>codesign</code>é‡ç­¾å<code>codesign -s â€“ â€“entitlements ./entitlement.entitlements -f debugserver</code><br>å°†ç­¾åå®Œæˆçš„<code>debugserver</code>æ”¾å…¥æ‰‹æœº<code>usr/bin</code>ç›®å½•ä¸‹<br>å¹¶ç»™æƒé™</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">chomod +x <span class="hljs-regexp">/usr/</span>bin/debugserver<br></code></pre></td></tr></table></figure><p>è¿™é‡Œä¸æ˜¯ä¹‹å‰æ›¿æ¢åŸæ¥çš„<code>debugserver</code> ,å› ä¸ºé‚£ä¸ªç›®å½•æ˜¯åªè¯»çš„æ²¡æœ‰æƒé™æ‰€ä»¥æ”¾åœ¨<code>/usr/bin/</code>ä¸‹é¢</p><h5 id="step2"><a href="#step2" class="headerlink" title="step2."></a>step2.</h5><p>æ‰‹æœºéœ€è¦å’Œmacåšè¿æ¥ è¯¦è§SSHç™»å½•</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">python</span> /Users/apple/Desktop/jailbreak/usbmuxd/tcprelay.py -t <span class="hljs-number">22</span>:<span class="hljs-number">10010</span> <span class="hljs-number">10011</span>:<span class="hljs-number">10011</span>(è®©æ‰‹æœºçš„<span class="hljs-number">22</span>ã€<span class="hljs-number">10011</span>ç«¯å£æ˜ å°„åˆ°æœ¬åœ°çš„<span class="hljs-number">10010</span>ã€<span class="hljs-number">10011</span>ç«¯å£)<br></code></pre></td></tr></table></figure><p>ç™»å½•æ‰‹æœº</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">ssh</span> root<span class="hljs-variable">@localhost</span> -p <span class="hljs-number">10010</span><br></code></pre></td></tr></table></figure><p>ç›‘å¬è¿›ç¨‹</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-comment">#debugserver é™„åŠ åˆ°è¿›ç¨‹ å¹¶å¼€å¯10011ç«¯å£ ç­‰å¾…æ‰€æœ‰çš„åœ°å€æ¥è¿æ¥</span><br><span class="hljs-attribute">debugserver</span> *:<span class="hljs-number">10011</span> -a ã€è¿›ç¨‹åã€‘<br></code></pre></td></tr></table></figure><h5 id="step3"><a href="#step3" class="headerlink" title="step3."></a>step3.</h5><p>debugserver å¯åŠ¨æˆåŠŸåå°±å¯ä»¥åœ¨macOsä¸Šè¿æ¥äº†ï¼Œåœ¨ç»ˆç«¯è¾“å…¥<code>lldb</code>è¿›å…¥lldbç¯å¢ƒï¼Œ</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs arduino">#ç”±äºä¸Šé¢çš„æ˜ å°„ï¼Œç›´æ¥è¿æ¥æœ¬åœ°çš„<span class="hljs-number">10011</span>ç«¯å£<br>process connect connect:<span class="hljs-comment">//localhost:10011</span><br></code></pre></td></tr></table></figure><h4 id="debugserver-å¯åŠ¨App"><a href="#debugserver-å¯åŠ¨App" class="headerlink" title="debugserver å¯åŠ¨App"></a>debugserver å¯åŠ¨App</h4><p>å¯è§‚å¯ŸAppæ˜¯å¦‚ä½•å¯åŠ¨çš„</p><figure class="highlight gml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gml">debugserver  -<span class="hljs-variable language_">x</span> auto *:ç«¯å£å· Appçš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ <br><span class="hljs-comment">//æˆ–è€…</span><br>debugserver -<span class="hljs-variable language_">x</span> backboard *:<span class="hljs-number">10011</span> /è·¯å¾„<span class="hljs-variable language_">x</span>/<span class="hljs-variable language_">x</span>/xx/xx.app/xx<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Cycriptçš„ä½¿ç”¨-é€†å‘03</title>
    <link href="/2025/03/07/Cycript%E7%9A%84%E4%BD%BF%E7%94%A8-%E9%80%86%E5%90%9103/"/>
    <url>/2025/03/07/Cycript%E7%9A%84%E4%BD%BF%E7%94%A8-%E9%80%86%E5%90%9103/</url>
    
    <content type="html"><![CDATA[<h1 id="Cycriptçš„ä½¿ç”¨-é€†å‘03"><a href="#Cycriptçš„ä½¿ç”¨-é€†å‘03" class="headerlink" title="Cycriptçš„ä½¿ç”¨-é€†å‘03"></a>Cycriptçš„ä½¿ç”¨-é€†å‘03</h1><h4 id="Cycriptèƒ½å¹²ä»€ä¹ˆ"><a href="#Cycriptèƒ½å¹²ä»€ä¹ˆ" class="headerlink" title="Cycriptèƒ½å¹²ä»€ä¹ˆ"></a>Cycriptèƒ½å¹²ä»€ä¹ˆ</h4><blockquote><p>Cycriptå¯ä»¥ç”¨æ¥æ¢ç´¢ã€ä¿®æ”¹ã€è°ƒè¯•æ­£åœ¨è¿è¡Œçš„Mac&#x2F;iOS App</p></blockquote><p><a href="http://www.cycript.org/">å®˜ç½‘ï¼šhttp://www.cycript.org/</a></p><p><a href="http://www.cycript.org/manual/">æ–‡æ¡£ï¼šhttp://www.cycript.org/manual/</a></p><p>é€šè¿‡Cydiaå®‰è£…Cycriptå°±å¯ä»¥ä½¿ç”¨äº†</p><h4 id="Cycriptå¼€å¯å’Œå…³é—­"><a href="#Cycriptå¼€å¯å’Œå…³é—­" class="headerlink" title="Cycriptå¼€å¯å’Œå…³é—­"></a>Cycriptå¼€å¯å’Œå…³é—­</h4><figure class="highlight mathematica"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs mathematica"><span class="hljs-variable">Cycript</span><br><br><span class="hljs-variable">Cycript</span> <span class="hljs-operator">-</span><span class="hljs-variable">p</span> è¿›ç¨‹<span class="hljs-variable">ID</span><span class="hljs-operator">/</span>è¿›ç¨‹åç§°<br><br><span class="hljs-type">#</span> é€€å‡ºï¼š<br><span class="hljs-variable">controle</span> <span class="hljs-operator">+</span> <span class="hljs-built_in">D</span><br><br>å–æ¶ˆè¾“å…¥ï¼š<span class="hljs-variable">control</span> <span class="hljs-operator">+</span> <span class="hljs-built_in">C</span><br></code></pre></td></tr></table></figure><h4 id="è·å–è¿›ç¨‹åç§°-è¿›ç¨‹id"><a href="#è·å–è¿›ç¨‹åç§°-è¿›ç¨‹id" class="headerlink" title="è·å–è¿›ç¨‹åç§°&#x2F;è¿›ç¨‹id"></a>è·å–è¿›ç¨‹åç§°&#x2F;è¿›ç¨‹id</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment"># è·å–æ‰€æœ‰è¿›ç¨‹</span><br><span class="hljs-built_in">ps</span> <span class="hljs-literal">-A</span><br><span class="hljs-built_in">ps</span> - A ï½œ grep å…³é”®è¯<br></code></pre></td></tr></table></figure><h4 id="Cycriptå¸¸ç”¨è¯­æ³•"><a href="#Cycriptå¸¸ç”¨è¯­æ³•" class="headerlink" title="Cycriptå¸¸ç”¨è¯­æ³•"></a>Cycriptå¸¸ç”¨è¯­æ³•</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs stylus">UIApp UIApp ç­‰ä»·äº<span class="hljs-selector-attr">[UIApplication sharedApplication]</span><br><br>å®šä¹‰å˜é‡ <span class="hljs-selector-tag">var</span> å˜é‡å = å˜é‡å€¼<br><br>ç”¨å†…å­˜åœ°å€è·å–å¯¹è±¡ #å†…å­˜åœ°å€<br><br>å·²åŠ è½½çš„æ‰€æœ‰OCç±» ObjectiveC<span class="hljs-selector-class">.classes</span><br><br>æŸ¥çœ‹å¯¹è±¡çš„æ‰€æœ‰æˆå‘˜å˜é‡ *å¯¹è±¡<br><br>é€’å½’æ‰“å°Viewçš„æ‰€æœ‰å­æ§ä»¶ å¯¹è±¡<span class="hljs-selector-class">.recursiveDescription</span>()<span class="hljs-selector-class">.toString</span>()<br><br>ç­›é€‰å‡ºæŸç§ç±»å‹çš„å¯¹è±¡ <span class="hljs-built_in">choose</span>(UIViewController) <span class="hljs-built_in">choose</span>(UITableViewCell)<br></code></pre></td></tr></table></figure><h4 id="Cycripté«˜çº§ä½¿ç”¨"><a href="#Cycripté«˜çº§ä½¿ç”¨" class="headerlink" title="Cycripté«˜çº§ä½¿ç”¨"></a>Cycripté«˜çº§ä½¿ç”¨</h4><p>æˆ‘ä»¬å¯ä»¥å°†å¸¸ç”¨çš„Cycriptä»£ç å°è£…åœ¨ä¸€ä¸ª.cyæ–‡ä»¶ä¸­<br>ç„¶åå°†.cyæ–‡ä»¶æ‹–è¿›æ‰‹æœº<code>/usr/lib/cycript0.9</code>è·¯å¾„ä¸‹<br>ä½¿ç”¨æ—¶ å¯¼å…¥XX.py @import XX</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Swiftæ··ç¼–åº“çš„é‚£äº›äº‹å„¿</title>
    <link href="/2025/03/07/Swift%E6%B7%B7%E7%BC%96%E5%BA%93%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/"/>
    <url>/2025/03/07/Swift%E6%B7%B7%E7%BC%96%E5%BA%93%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/</url>
    
    <content type="html"><![CDATA[<h1 id="Swiftæ··ç¼–åº“çš„é‚£äº›äº‹å„¿"><a href="#Swiftæ··ç¼–åº“çš„é‚£äº›äº‹å„¿" class="headerlink" title="Swiftæ··ç¼–åº“çš„é‚£äº›äº‹å„¿"></a>Swiftæ··ç¼–åº“çš„é‚£äº›äº‹å„¿</h1><h5 id="1ã€åœ¨swift-framworkä¸­è°ƒç”¨ocä¸”ä¸å‘å¤–æš´éœ²"><a href="#1ã€åœ¨swift-framworkä¸­è°ƒç”¨ocä¸”ä¸å‘å¤–æš´éœ²" class="headerlink" title="1ã€åœ¨swift framworkä¸­è°ƒç”¨ocä¸”ä¸å‘å¤–æš´éœ²"></a>1ã€åœ¨swift framworkä¸­è°ƒç”¨ocä¸”ä¸å‘å¤–æš´éœ²</h5><ul><li>ä½¿ç”¨module.modulemapæ–‡ä»¶</li><li><code>Build Setting</code> -&gt;<code>Swift Compile - Search Path</code> ä¸­è®¾ç½®<code>module.modulemap</code>è·¯å¾„ <code>&quot;$(SRCROOT)/xxx&quot;</code></li></ul><h5 id="2ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰-frameworkæ˜¯åŠ¨æ€åº“"><a href="#2ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰-frameworkæ˜¯åŠ¨æ€åº“" class="headerlink" title="2ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰.frameworkæ˜¯åŠ¨æ€åº“"></a>2ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰.frameworkæ˜¯åŠ¨æ€åº“</h5><ul><li>è®¾ç½® <code>Build Setting</code> -&gt;<code>Build Libraries for Distribution</code>ä¸º<code>YES</code> å®ç°ä¸åŒç‰ˆæœ¬ç¼–è¯‘å™¨ä¹‹é—´çš„å…¼å®¹é—®é¢˜</li></ul><h5 id="3ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰-frameworkæ˜¯é™æ€åº“-ä¸”podspecä¸­ä¾èµ–Alamofireè¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“"><a href="#3ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰-frameworkæ˜¯é™æ€åº“-ä¸”podspecä¸­ä¾èµ–Alamofireè¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“" class="headerlink" title="3ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰.frameworkæ˜¯é™æ€åº“ ä¸”podspecä¸­ä¾èµ–Alamofireè¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“"></a>3ã€æä¾›çš„ocã€swiftæ··ç¼–ç§æœ‰.frameworkæ˜¯é™æ€åº“ ä¸”podspecä¸­ä¾èµ–<code>Alamofire</code>è¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“</h5><ul><li><p>è®¾ç½® <code>Build Setting</code> -&gt;<code>Build Libraries for Distribution</code>ä¸º<code>YES</code> å®ç°ä¸åŒç‰ˆæœ¬ç¼–è¯‘å™¨ä¹‹é—´çš„å…¼å®¹é—®é¢˜</p></li><li><p>é›†æˆæ–¹éœ€è¦åœ¨podfile ä¸­åŠ å…¥ ä»¥ä¸‹ä»£ç </p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs coq">post_install <span class="hljs-built_in">do</span> |<span class="hljs-type">installer</span>|<br>  <span class="hljs-type">installer</span>.pods_project.targets.each <span class="hljs-built_in">do</span> |<span class="hljs-type">target</span>|<br>   <span class="hljs-type">target</span>.build_configurations.each <span class="hljs-built_in">do</span> |<span class="hljs-type">config</span>|<br>    <span class="hljs-type">config</span>.build_settings[&#x27;BUILD_LIBRARY_FOR_DISTRIBUTION&#x27;] = &#x27;YES&#x27;<br>   <span class="hljs-keyword">end</span><br>  <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure></li></ul><h5 id="4ã€ç»è¿‡1çš„æ“ä½œå‘ç°ocå·¥ç¨‹å¯ä»¥é›†æˆæˆåŠŸï¼Œswiftå·¥ç¨‹ä¸­é›†æˆæŠ¥äº†2ä¸ªé”™-1-Failed-to-build-module-SwiftOCDynamicSdk-this-SDK-is-not-supported-by-the-compiler-the-SDK-is-built-with-Apple-Swift-version-5-5-swiftlang-1300-0-31-1-clang-1300-0-29-1-while-this-compiler-is-Apple-Swift-version-5-7-swiftlang-5-7-0-127-4-clang-1400-0-29-50-Please-select-a-toolchain-which-matches-the-SDK-2-No-such-module-â€˜OCXXXModuleâ€™"><a href="#4ã€ç»è¿‡1çš„æ“ä½œå‘ç°ocå·¥ç¨‹å¯ä»¥é›†æˆæˆåŠŸï¼Œswiftå·¥ç¨‹ä¸­é›†æˆæŠ¥äº†2ä¸ªé”™-1-Failed-to-build-module-SwiftOCDynamicSdk-this-SDK-is-not-supported-by-the-compiler-the-SDK-is-built-with-Apple-Swift-version-5-5-swiftlang-1300-0-31-1-clang-1300-0-29-1-while-this-compiler-is-Apple-Swift-version-5-7-swiftlang-5-7-0-127-4-clang-1400-0-29-50-Please-select-a-toolchain-which-matches-the-SDK-2-No-such-module-â€˜OCXXXModuleâ€™" class="headerlink" title="4ã€ç»è¿‡1çš„æ“ä½œå‘ç°ocå·¥ç¨‹å¯ä»¥é›†æˆæˆåŠŸï¼Œswiftå·¥ç¨‹ä¸­é›†æˆæŠ¥äº†2ä¸ªé”™ 1.Failed to build module &#39;SwiftOCDynamicSdk&#39;; this SDK is not supported by the compiler (the SDK is built with &#39;Apple Swift version 5.5 (swiftlang-1300.0.31.1 clang-1300.0.29.1)&#39;, while this compiler is &#39;Apple Swift version 5.7 (swiftlang-5.7.0.127.4 clang-1400.0.29.50)&#39;). Please select a toolchain which matches the SDK. 2.No such module â€˜OCXXXModuleâ€™"></a>4ã€ç»è¿‡1çš„æ“ä½œå‘ç°ocå·¥ç¨‹å¯ä»¥é›†æˆæˆåŠŸï¼Œswiftå·¥ç¨‹ä¸­é›†æˆæŠ¥äº†2ä¸ªé”™ 1.<code>Failed to build module &#39;SwiftOCDynamicSdk&#39;; this SDK is not supported by the compiler (the SDK is built with &#39;Apple Swift version 5.5 (swiftlang-1300.0.31.1 clang-1300.0.29.1)&#39;, while this compiler is &#39;Apple Swift version 5.7 (swiftlang-5.7.0.127.4 clang-1400.0.29.50)&#39;). Please select a toolchain which matches the SDK.</code> 2.No such module â€˜OCXXXModuleâ€™</h5><p><strong>éªšæ“ä½œæ¥äº†</strong></p><ul><li><p>åœ¨swiftå·¥ç¨‹ä¸­åˆ›å»ºä¸€ä¸ª</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arduino"><span class="hljs-keyword">module</span>.modulemap<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶ï¼Œå¹¶ç”³æ˜ä¸€ä¸ªæŠ¥é”™ç¼ºå¤±çš„module</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean">#è¿™é‡Œ<br><span class="hljs-keyword">module</span> OCXXXModule <br>&#123;<br>    <span class="hljs-keyword">export</span> *<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><code>Build Setting</code> -&gt;<code>Swift Compile - Search Path</code> ä¸­è®¾ç½®<code>module.modulemap</code>è·¯å¾„ <code>&quot;$(SRCROOT)/xxx&quot;</code></p></li></ul><h4 id="5ã€æ‹“å±•-Swiftç»„ä»¶å†…è°ƒç”¨OCï¼Œè°ƒç”¨-OC-çš„ç§æœ‰å¤´æ–‡ä»¶"><a href="#5ã€æ‹“å±•-Swiftç»„ä»¶å†…è°ƒç”¨OCï¼Œè°ƒç”¨-OC-çš„ç§æœ‰å¤´æ–‡ä»¶" class="headerlink" title="5ã€æ‹“å±•: Swiftç»„ä»¶å†…è°ƒç”¨OCï¼Œè°ƒç”¨ OC çš„ç§æœ‰å¤´æ–‡ä»¶"></a>5ã€æ‹“å±•: Swiftç»„ä»¶å†…è°ƒç”¨OCï¼Œè°ƒç”¨ OC çš„ç§æœ‰å¤´æ–‡ä»¶</h4><p>5.1 è¯¥swiftç»„ä»¶éœ€è¦ä»¥äºŒè¿›åˆ¶æ–¹å¼è¢«å¦ä¸€Swift2æ··ç¼–ç»„ä»¶é›†æˆ</p><ul><li>åŸç†åŒ4<br>5.2 è¯¥swiftç»„ä»¶éœ€è¦ä»¥ä»¥æºç æ–¹å¼ è¢«å¦ä¸€Swift2æ··ç¼–ç»„ä»¶é›†æˆ</li><li>importè¯¥ç§æœ‰module</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iOSè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬</title>
    <link href="/2025/03/07/iOS%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85%E8%84%9A%E6%9C%AC/"/>
    <url>/2025/03/07/iOS%E8%87%AA%E5%8A%A8%E5%8C%96%E6%89%93%E5%8C%85%E8%84%9A%E6%9C%AC/</url>
    
    <content type="html"><![CDATA[<h1 id="iOSè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬"><a href="#iOSè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬" class="headerlink" title="iOSè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬"></a>iOSè‡ªåŠ¨åŒ–æ‰“åŒ…è„šæœ¬</h1><blockquote><p>é—²æ¥æ— äº‹å­¦ä¹ ä¸€ä¸‹shell</p></blockquote><h4 id="æ‰“åŒ…xcframework"><a href="#æ‰“åŒ…xcframework" class="headerlink" title="æ‰“åŒ…xcframework"></a>æ‰“åŒ…xcframework</h4><ul><li>ç”±äºxcode13çš„æ¨¡æ‹Ÿå™¨ä¹ŸåŒ…å«arm64æ¶æ„ï¼Œç§»é™¤æ¨¡æ‹Ÿå™¨arm64æ¶æ„ï¼Œ<code>build Setting</code>&#x3D;&gt;<code>Excluded Architectures</code>&#x3D;&gt;å‹¾é€‰<code>Any ios simulator sdk</code> æ·»åŠ <code>arm64</code> ä¹Ÿå¯åœ¨è„šæœ¬ä¸­è®¾ç½®-arch</li></ul><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br>set -e<br>set -u<br>set -o pipefail<br><br>SCHEME_NAME=sdk<br>WORKSPACE_NAME=sdk<br><span class="hljs-comment">#æ‰“åŒ…ç¯å¢ƒ</span><br>CONFIGURATION=Release<br><br><span class="hljs-comment">#cdåˆ°è„šæœ¬ç»å¯¹è·¯å¾„ä¸‹</span><br>ROOT_PATH=$(cd <span class="hljs-string">&quot;$(dirname &quot;</span><span class="hljs-variable">$&#123;BASH_SOURCE[0]&#125;</span><span class="hljs-string">&quot;)&quot;</span>; pwd)<br><span class="hljs-comment">#è¾“å‡ºè·¯å¾„</span><br>EXPORT_PATH=<span class="hljs-variable">$&#123;ROOT_PATH&#125;</span>/archive<br><br><br><span class="hljs-comment">#chech scheme</span><br>xcodebuild -list || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment">#clean</span><br><span class="hljs-keyword">function</span> arch_clean &#123;<br>    xcodebuild clean \<br>    -workspace <span class="hljs-variable">$&#123;WORKSPACE_NAME&#125;</span>.xcworkspace \<br>    -scheme <span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span> \<br>    -configuration <span class="hljs-variable">$&#123;CONFIGURATION&#125;</span><br>&#125;<br><br><span class="hljs-comment">#ä¸‹é¢iphonesimulator15.5 å¯æ ¹æ® xcodebuild -showsdksæŸ¥çœ‹</span><br> <span class="hljs-comment"># #æ‰“åŒ…æ¨¡æ‹Ÿå™¨</span><br><span class="hljs-keyword">function</span> archive_simulator &#123;<br>     xcodebuild archive \<br>     -workspace <span class="hljs-variable">$&#123;WORKSPACE_NAME&#125;</span>.xcworkspace \<br>     -scheme <span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span> \<br>     -destination=<span class="hljs-string">&quot;iOS Simulator&quot;</span> \<br>     -sdk iphonesimulator15.<span class="hljs-number">5</span> \ <br>     -configuration <span class="hljs-variable">$&#123;CONFIGURATION&#125;</span> \<br>     SKIP_INSTALL=NO \<br>     BUILD_LIBRARIES_FOR_DISTRIBUTION=YES \<br>     -archivePath <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/ios_simulator.xcarchive<br> &#125;<br><br><span class="hljs-keyword">function</span> archive_iosDevice &#123;<br>     xcodebuild archive \<br>     -workspace <span class="hljs-variable">$&#123;WORKSPACE_NAME&#125;</span>.xcworkspace \<br>     -scheme <span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span> \<br>    -sdk iphoneos \<br>     -destination=<span class="hljs-string">&quot;iOS&quot;</span> \<br>     -configuration <span class="hljs-variable">$&#123;CONFIGURATION&#125;</span> \<br>     SKIP_INSTALL=NO \<br>     BUILD_LIBRARIES_FOR_DISTRIBUTION=YES \<br>     -archivePath <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/ios_device.xcarchive<br> &#125;<br><br> <span class="hljs-comment"># #åˆ›å»ºxcframework</span><br> <span class="hljs-keyword">function</span> create_xcframework &#123;<br>     xcodebuild -create-xcframework \<br>     -framework <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span><span class="hljs-regexp">/ios_device.xcarchive/</span>Products<span class="hljs-regexp">/Library/</span>Frameworks/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.framework \<br>     -framework <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span><span class="hljs-regexp">/ios_simulator.xcarchive/</span>Products<span class="hljs-regexp">/Library/</span>Frameworks/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.framework \<br>     -output <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.xcframework<br> &#125;<br><br><br> arch_clean || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br> archive_simulator || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br><br> <span class="hljs-keyword">if</span> [[ -e <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/ios_simulator.xcarchive ]] ;then<br>     echo -e <span class="hljs-string">&quot;\033[1135mğŸºğŸºğŸºğŸºğŸºğŸºxcarchive ios_simulator success!ğŸºğŸºğŸºğŸºğŸºğŸº \033[0m&quot;</span><br> <span class="hljs-keyword">else</span><br>     echo -e <span class="hljs-string">&quot;\033[1135mâŒâŒâŒâŒâŒâŒxcarchive ios_simulator fail!âŒâŒâŒâŒâŒâŒ \033[0m&quot;</span><br> fi<br><br>archive_iosDevice || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br><br><span class="hljs-keyword">if</span> [[ -e <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/ios_device.xcarchive ]] ;then<br>     echo -e <span class="hljs-string">&quot;\033[1135mğŸºğŸºğŸºğŸºğŸºğŸºxcarchiveios_device success!ğŸºğŸºğŸºğŸºğŸºğŸº \033[0m&quot;</span><br> <span class="hljs-keyword">else</span><br>     echo -e <span class="hljs-string">&quot;\033[1135mâŒâŒâŒâŒâŒâŒxcarchive ios_device fail!âŒâŒâŒâŒâŒâŒ \033[0m&quot;</span><br> fi<br><br> cd <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span> <br> create_xcframework || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br> <span class="hljs-keyword">if</span> [[ -e <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.xcframework ]] ;then<br>    echo -e <span class="hljs-string">&quot;\033[1135mğŸºğŸºğŸºğŸºğŸºğŸºcreate $&#123;SCHEME_NAME&#125;.xcframework success!ğŸºğŸºğŸºğŸºğŸºğŸº \033[0m&quot;</span><br> <span class="hljs-keyword">else</span><br>     echo -e <span class="hljs-string">&quot;\033[1135mâŒâŒâŒâŒâŒâŒcreate $&#123;SCHEME_NAME&#125;.xcframework fail!âŒâŒâŒâŒâŒâŒ \033[0m&quot;</span><br> fi<br><br> open .<br></code></pre></td></tr></table></figure><h4 id="æ‰“åŒ…ipa"><a href="#æ‰“åŒ…ipa" class="headerlink" title="æ‰“åŒ…ipa"></a>æ‰“åŒ…ipa</h4><p>æŠŠshellè„šæœ¬å’ŒExportOptions.plistä¸€èµ·æ”¾åœ¨æ ¹ç›®å½•ä¸‹ï¼Œä¸‹é¢ä¾‹å­ä¸­ExportOptions.plistä¸ºad-hocæ¨¡å¼ã€‚</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-comment">#!/bin/bash</span><br>set -e<br>set -u<br>set -o pipefail<br><br>SCHEME_NAME=SdkApp<br>WORKSPACE_NAME=sdk<br><span class="hljs-comment">#æ‰“åŒ…ç¯å¢ƒ</span><br>CONFIGURATION=Release<br><span class="hljs-comment">#cdåˆ°è„šæœ¬ç»å¯¹è·¯å¾„ä¸‹</span><br>ROOT_PATH=$(cd <span class="hljs-string">&quot;$(dirname &quot;</span><span class="hljs-variable">$&#123;BASH_SOURCE[0]&#125;</span><span class="hljs-string">&quot;)&quot;</span>; pwd)<br><span class="hljs-comment">#è¾“å‡ºè·¯å¾„</span><br>EXPORT_PATH=<span class="hljs-variable">$&#123;ROOT_PATH&#125;</span>/archive<br>EXPORT_IPA_PATH=<span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/ipa<br><br><span class="hljs-comment">#chech scheme</span><br>xcodebuild -list || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br><br><span class="hljs-comment">#clean</span><br><span class="hljs-keyword">function</span> arch_clean &#123;<br>    xcodebuild clean \<br>    -workspace <span class="hljs-variable">$&#123;WORKSPACE_NAME&#125;</span>.xcworkspace \<br>    -scheme <span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span> \<br>    -configuration <span class="hljs-variable">$&#123;CONFIGURATION&#125;</span><br>&#125;<br><br><span class="hljs-comment">#ç¼–è¯‘</span><br><span class="hljs-keyword">function</span> archive &#123;<br>    xcodebuild archive \<br>    -workspace <span class="hljs-variable">$&#123;WORKSPACE_NAME&#125;</span>.xcworkspace \<br>    -scheme <span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span> \<br>    -configuration <span class="hljs-variable">$&#123;CONFIGURATION&#125;</span> \<br>    -archivePath <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.xcarchive<br>&#125;<br><br><span class="hljs-comment">#æ‰“åŒ…å¯¼å‡º</span><br><span class="hljs-keyword">function</span> arch_export &#123;<br>    xcodebuild -exportArchive \<br>    -archivePath <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.xcarchive \<br>    -exportPath <span class="hljs-variable">$&#123;EXPORT_IPA_PATH&#125;</span> \<br>    -exportOptionsPlist <span class="hljs-variable">$&#123;ROOT_PATH&#125;</span>/ExportOptions.plist <br>&#125;<br><br><br> arch_clean || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br> archive || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br><br> <span class="hljs-keyword">if</span> [[ -e <span class="hljs-variable">$&#123;EXPORT_PATH&#125;</span>/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.xcarchive ]] ;then<br>     echo -e <span class="hljs-string">&quot;\033[1;35mğŸºğŸºğŸºğŸºğŸºxcarchive successï¼ğŸºğŸº \033[0m&quot;</span><br> <span class="hljs-keyword">else</span><br>     echo -e <span class="hljs-string">&quot;\033[1;35mâŒâŒ fail âŒâŒâŒâŒ\033[0m&quot;</span><br> fi<br><br>arch_export || <span class="hljs-keyword">exit</span> <span class="hljs-number">0</span><br><br><span class="hljs-keyword">if</span> [[ -e <span class="hljs-variable">$&#123;EXPORT_IPA_PATH&#125;</span>/<span class="hljs-variable">$&#123;SCHEME_NAME&#125;</span>.ipa ]] ;then<br>     echo -e <span class="hljs-string">&quot;\033[1;35mğŸºğŸºğŸºğŸºğŸºxcarchive successï¼ğŸºğŸº \033[0m&quot;</span><br> <span class="hljs-keyword">else</span><br>     echo -e <span class="hljs-string">&quot;\033[1;35mâŒâŒ fail âŒâŒâŒâŒ\033[0m&quot;</span><br> fi<br><br>open <span class="hljs-variable">$&#123;EXPORT_IPA_PATH&#125;</span><br></code></pre></td></tr></table></figure><p>ExportOptions.plist æ–‡ä»¶&lt;å¯æ‰‹åŠ¨æ‰“åŒ…ä¸€æ¬¡åï¼Œç”Ÿæˆ&gt;</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">plist</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span> <span class="hljs-string">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plist</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;1.0&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dict</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>destination<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>export<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>method<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>ad-hoc<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>signingStyle<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>automatic<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>stripSwiftSymbols<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">true</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">key</span>&gt;</span>thinning<span class="hljs-tag">&lt;/<span class="hljs-name">key</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span><span class="hljs-symbol">&amp;lt;</span>none<span class="hljs-symbol">&amp;gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dict</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plist</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>iOSåˆ¶ä½œç§æœ‰åº“</title>
    <link href="/2025/03/07/iOS%E5%88%B6%E4%BD%9C%E7%A7%81%E6%9C%89%E5%BA%93/"/>
    <url>/2025/03/07/iOS%E5%88%B6%E4%BD%9C%E7%A7%81%E6%9C%89%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<h1 id="iOSåˆ¶ä½œç§æœ‰åº“"><a href="#iOSåˆ¶ä½œç§æœ‰åº“" class="headerlink" title="iOSåˆ¶ä½œç§æœ‰åº“"></a>iOSåˆ¶ä½œç§æœ‰åº“</h1><p>å¤§è‡´æ­¥éª¤å…¥ä¸‹:</p><ul><li>åˆ›å»ºè¿œç¨‹ç´¢å¼•åº“ã€è¿œç¨‹ç§æœ‰åº“</li><li>åˆ›å»ºè¿œç¨‹ç´¢å¼•åº“æ—¶ï¼Œæœ€å¥½åŒæ—¶åˆå§‹åŒ–ä¸€ä¸ªreadmeæ–‡ä»¶ã€‚å¦è€…åé¢æ“ä½œä¼šæŠ¥é”™ï¼Œè§£å†³ä¹Ÿæ˜¯éœ€è¦åœ¨è¿œç¨‹ç´¢å¼•ä»“åº“åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶</li><li>åˆ›å»ºæœ¬åœ°ç§æœ‰åº“ã€å…³è”è¿œç¨‹ç§æœ‰åº“<ul><li>ç»ˆç«¯è¾“å…¥<code>pod lib create xxxSDK </code></li><li><code>cd xxxSDK</code></li><li><code>git remote add origin https:xxx.xxxSDK.git</code></li></ul></li><li>æœ¬åœ°æ·»åŠ ç§æœ‰åº“ç´¢å¼•<ul><li>ç»ˆç«¯è¾“å…¥<code>pod repo add name[ç´¢å¼•å] source [è¿œç¨‹ç´¢å¼•åœ°å€] </code></li><li>ä¾‹å¦‚ï¼š<code>pod repo add PluginPodspecs http://xxx.pluginpodspecs.git</code></li><li><code>pod repo list</code>æŸ¥çœ‹</li></ul></li><li>æ·»åŠ æœ¬åœ°ç§æœ‰åº“å†…å®¹ã€ä¿®æ”¹<code>xxx.podspec</code>æ–‡ä»¶</li><li>æœ¬åœ°æ ¡éªŒ<ul><li><code>pod lib lint --verbose --allow-warnings </code></li><li>å¦‚æœç§æœ‰åº“é‡Œæœ‰åµŒå¥—å¦ä¸€ä¸ªç§æœ‰åº“ åœ¨ä¸Šé¢å‘½ä»¤åé¢åœ¨åŠ ä¸Šå‚æ•°<code>--sources=[ç´¢å¼•åº“å€],https://github.com/CocoaPods/Specs.git </code></li></ul></li><li>ç§æœ‰åº“æäº¤åˆ°è¿œç¨‹ä»“åº“ã€æ‰“tag<ul><li><code>xxx.podspec</code>æ–‡ä»¶å…·ä½“å¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ <a href="https://guides.cocoapods.org/syntax/podspec.html">https://guides.cocoapods.org/syntax/podspec.html</a></li></ul></li><li>è¿œç¨‹æ ¡éªŒ<ul><li><code>pod spec lint --allow-warnings --verbose</code></li></ul></li><li>æäº¤æœ¬åœ°ç´¢å¼•åˆ°è¿œç¨‹<ul><li><code>cd xxxSDK &amp;&amp; pod repo push [æœ¬åœ°ç´¢å¼•åº“] [ç´¢å¼•æ–‡ä»¶å]</code></li><li><code>pod repo push PluginPodspecs xxxSDK.podspec --verbose --allow-warnings</code></li></ul></li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>sshç™»å½•iPhone-é€†å‘01</title>
    <link href="/2025/03/07/ssh%E7%99%BB%E5%BD%95iPhone-%E9%80%86%E5%90%9101/"/>
    <url>/2025/03/07/ssh%E7%99%BB%E5%BD%95iPhone-%E9%80%86%E5%90%9101/</url>
    
    <content type="html"><![CDATA[<h1 id="sshç™»å½•iPhone-é€†å‘01"><a href="#sshç™»å½•iPhone-é€†å‘01" class="headerlink" title="sshç™»å½•iPhone-é€†å‘01"></a>sshç™»å½•iPhone-é€†å‘01</h1><h2 id="SSHç™»å½•iPhone"><a href="#SSHç™»å½•iPhone" class="headerlink" title="SSHç™»å½•iPhone"></a>SSHç™»å½•iPhone</h2><h3 id="æ— çº¿æ¨¡å¼-iphoneå’Œmacåœ¨åŒä¸€å±€åŸŸç½‘ä¸‹"><a href="#æ— çº¿æ¨¡å¼-iphoneå’Œmacåœ¨åŒä¸€å±€åŸŸç½‘ä¸‹" class="headerlink" title="æ— çº¿æ¨¡å¼ (iphoneå’Œmacåœ¨åŒä¸€å±€åŸŸç½‘ä¸‹)"></a>æ— çº¿æ¨¡å¼ (iphoneå’Œmacåœ¨åŒä¸€å±€åŸŸç½‘ä¸‹)</h3><ul><li>åœ¨iPhoneä¸Šé€šè¿‡Cydiaå®‰è£…OpenSSHå·¥å…·</li><li>macç»ˆç«¯è¾“å…¥$ssh è´¦æˆ·@ipåœ°å€ (iOSä¸‹2ä¸ªå¸¸ç”¨è´¦æˆ·ï¼šrootã€mobile)</li></ul><p>ä¾‹ï¼š<code>ssh root@170.16.4.000</code></p><blockquote><p>åˆå§‹å¯†ç :alpine</p></blockquote><h3 id="æœ‰çº¿æ¨¡å¼-USB"><a href="#æœ‰çº¿æ¨¡å¼-USB" class="headerlink" title="æœ‰çº¿æ¨¡å¼&#x2F;USB"></a>æœ‰çº¿æ¨¡å¼&#x2F;USB</h3><blockquote><p>è¯¥ç§æ–¹å¼é‡‡ç”¨çš„æ˜¯Macä¸Šçš„ä¸€ä¸ªæœåŠ¡ç¨‹åºusbmuxd</p></blockquote><p>ä½ç½®åœ¨&#x2F;System&#x2F;Library&#x2F;PrivateFrameworks&#x2F;MobileDevice.framework&#x2F;Resources&#x2F;usbmuxd</p><ul><li>ç¬¬ä¸€æ­¥éœ€è¦ä¸‹è½½ä¸€ä¸ªusbmuxdå·¥å…·åŒ…ï¼ˆä¸»è¦ç”¨åˆ°é‡Œé¢çš„usbmux.pyã€tcprelay.pyæ–‡ä»¶ï¼‰</li></ul><p><a href="https://links.jianshu.com/go?to=https://git.sukimashita.com/usbmuxd.git/">https://git.sukimashita.com/usbmuxd.git/</a></p><p>é€‰æ‹©1.0.8ç‰ˆæœ¬ , å°†usbmux.pyã€tcprelay.pyæ–‡ä»¶æ”¾åœ¨æ–¹ä¾¿çš„ä½ç½®</p><ul><li>ç»ˆç«¯è¾“å…¥ <code>python tcprelay.pyçš„è·¯å¾„ -t 22:10010</code></li></ul><p>ä¾‹ï¼š<code>python /Users/mac/Desktop/python-client/tcprelay.py -t 22:10010</code></p><blockquote><p>iPhoneé»˜è®¤æ˜¯ä½¿ç”¨22ç«¯å£è¿›è¡ŒSSHé€šä¿¡ï¼Œé‡‡ç”¨çš„æ˜¯TCPåè®®. æˆ‘ä»¬iPhone 22ç«¯å£æ˜ å°„åˆ°Macæœ¬åœ°çš„10010ç«¯å£</p></blockquote><ul><li>å¦èµ·ä¸€ä¸ªç»ˆç«¯çª—å£è¾“å…¥<code>ssh root@localhost -p 10010</code></li></ul><p>æˆ–<code>ssh root@127.0.0.1 -p 10010</code></p><blockquote><p>é™„: ç»ˆç«¯è¾“å…¥<code>exit</code>é€€å‡ºç™»å½•</p></blockquote><h3 id="æ‹“å±•-sshå…å¯†ç™»é™†"><a href="#æ‹“å±•-sshå…å¯†ç™»é™†" class="headerlink" title="æ‹“å±•:sshå…å¯†ç™»é™†"></a>æ‹“å±•:sshå…å¯†ç™»é™†</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">ä¿®æ”¹å¯†ç å•¥çš„è§Cydiaä»‹ç»<br></code></pre></td></tr></table></figure><p><em>ssh æ¯æ¬¡ç™»å½•éƒ½éœ€è¦è¾“å…¥å¯†ç ä»¤äººçƒ¦èº</em></p><ul><li>åˆ›å»ºssh</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">ssh-keygen</span><br></code></pre></td></tr></table></figure><ul><li>å°†ç”Ÿæˆçš„å…¬é’¥è¿½åŠ åˆ°æˆæƒæ–‡ä»¶å°¾éƒ¨</li></ul><p>ç»ˆç«¯æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼ˆå¦‚æœiphoneæ²¡æœ‰.sshæ–‡ä»¶å¤¹ è‡ªå·±æ‰‹åŠ¨åˆ›å»ºï¼‰</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby">scp -P <span class="hljs-number">10010</span> ~<span class="hljs-regexp">/.ssh/id</span>_rsa.pub root<span class="hljs-variable">@localhost</span><span class="hljs-symbol">:~/</span>.ssh<br></code></pre></td></tr></table></figure><p>æ¥ç€ç™»é™†iPhone æ‰§è¡Œå‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> ~/.ssh/id_rsa.pub &gt;&gt; authorized_keys<br><span class="hljs-built_in">rm</span> ~/.ssh/id_rsa.pub<br></code></pre></td></tr></table></figure><p>é€€å‡ºæ‰‹æœºåœ¨ç™»å½•å°±ä¸éœ€è¦å¯†ç äº†</p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
